<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Đặt lại mật khẩu - PolyShoes</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="icon" href="/image/Poly Store.png" type="image/png" sizes="32x32" />
  <style>
    :root {
      --primary-color: #000000;
      --secondary-color: #f0f0f0;
      --accent-color: #888888;
      --red-color: #d9121f;
      --light-red: #ffebee;
      --light-gray: #f8f9fa;
      --medium-gray: #e9ecef;
      --dark-gray: #333333;
      --white: #ffffff;
      --shadow-light: 0 4px 20px rgba(0, 0, 0, 0.08);
      --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.12);
      --shadow-heavy: 0 15px 40px rgba(0, 0, 0, 0.16);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      background: linear-gradient(135deg, #f8f9fa 0%, #f0f0f0 50%, #e5e5e5 100%);
      position: relative;
      overflow-x: hidden;
    }

    /* Removed background patterns and animations for cleaner look */

    .container-fluid {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      position: relative;
      z-index: 1;
    }

    .reset-container {
      max-width: 450px;
      width: 100%;
      position: relative;
    }

    /* Removed decorative elements for cleaner look */

    .reset-card {
      background: var(--white);
      border: none;
      border-radius: 20px;
      padding: 35px 30px;
      box-shadow: var(--shadow-medium);
      transition: all .3s cubic-bezier(.4, 0, .2, 1);
      position: relative;
      overflow: hidden;
    }

    .reset-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--red-color));
      border-radius: 20px 20px 0 0;
    }

    .reset-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-heavy);
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      border-left: 1px solid rgba(255, 255, 255, 0.2);
    }

    .brand-section {
      text-align: center;
      margin-bottom: 20px;
    }

    .brand-logo {
      width: 60px;
      height: 60px;
      margin: 0 auto 10px;
      display: block;
      border-radius: 12px;
      box-shadow: var(--shadow-light);
      transition: transform 0.3s ease;
    }

    .brand-logo:hover {
      transform: scale(1.05);
    }

    .welcome-title {
      font-size: 26px;
      font-weight: 800;
      margin-bottom: 6px;
      letter-spacing: -.5px;
      background: linear-gradient(to right, var(--primary-color), var(--red-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .welcome-subtitle {
      color: var(--dark-gray);
      font-size: 14px;
      font-weight: 500;
      opacity: 0.8;
    }

    .form-floating {
      margin-bottom: 16px;
      position: relative;
    }

    .form-floating .form-control {
      height: 54px;
      border: 1px solid var(--medium-gray);
      border-radius: 12px;
      font-size: 15px;
      font-weight: 500;
      padding-left: 48px;
      transition: all .3s ease;
      background: rgba(255, 255, 255, 0.7);
      color: var(--primary-color);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.03);
    }

    .form-floating .form-control:focus {
      border-color: var(--red-color);
      box-shadow: 0 0 0 4px rgba(217, 18, 31, 0.1);
      background: var(--white);
      transform: translateY(-1px);
    }

    .form-floating label {
      padding-left: 45px;
      color: var(--dark-gray);
      font-weight: 500;
      font-size: 14px;
    }

    .input-icon {
      position: absolute;
      left: 18px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--accent-color);
      font-size: 18px;
      z-index: 5;
      transition: all 0.3s ease;
      opacity: 0.7;
    }

    .form-floating .form-control:focus+label+.input-icon {
      color: var(--red-color);
      opacity: 1;
      transform: translateY(-50%) scale(1.1);
    }

    .password-toggle {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--accent-color);
      font-size: 16px;
      cursor: pointer;
      z-index: 5;
      transition: all 0.3s ease;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      opacity: 0.7;
    }

    .password-toggle:hover {
      color: var(--red-color);
      background-color: rgba(217, 18, 31, 0.08);
      opacity: 1;
    }

    .btn-submit {
      width: 100%;
      height: 52px;
      background: var(--red-color);
      border: none;
      border-radius: 12px;
      color: var(--white);
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 0.5px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      margin-bottom: 18px;
      box-shadow: 0 4px 15px rgba(217, 18, 31, 0.2);
    }

    .btn-submit::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.7s;
    }

    .btn-submit:hover::before {
      left: 100%;
    }

    .btn-submit:hover {
      background: #b5121a;
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(217, 18, 31, 0.3);
    }

    .btn-submit:active {
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(217, 18, 31, 0.2);
    }

    .alert {
      border: none;
      border-radius: 10px;
      padding: 12px 15px;
      font-weight: 500;
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
    }

    .alert-danger {
      background: #f8f9fa;
      color: #dc3545;
      border: 1px solid #f5c6cb;
      border-left: 4px solid #dc3545;
    }

    @media (max-width: 576px) {
      .reset-card {
        padding: 25px 20px;
        margin: 5px;
      }

      .welcome-title {
        font-size: 20px;
      }

      .brand-logo {
        width: 50px;
        height: 50px;
      }
    }

    .form-control:focus {
      outline: none;
    }

    .btn:focus {
      outline: 2px solid var(--red-color);
      outline-offset: 2px;
    }

    .was-validated .form-control:invalid {
      border-color: #dc3545;
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-5px);
      }

      75% {
        transform: translateX(5px);
      }
    }
  </style>
</head>

<body>
  <div class="container-fluid">
    <div class="reset-container">
      <div class="reset-card">
        <div class="brand-section">
          <h1 class="welcome-title">Đặt lại mật khẩu</h1>
          <p class="welcome-subtitle">Nhập mật khẩu mới cho tài khoản của bạn</p>
        </div>

        <form th:action="@{/customers/auth/reset-password}" method="post" class="needs-validation" novalidate>
          <input type="hidden" name="email" th:value="${email}" />
          <div class="form-floating">
            <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="Mật khẩu mới"
              required>
            <label for="newPassword">Mật khẩu mới</label>
            <i class="fas fa-lock input-icon"></i>
            <button type="button" class="password-toggle" onclick="togglePassword()" title="Hiển thị/Ẩn mật khẩu">
              <i class="fas fa-eye" id="toggleIcon"></i>
            </button>
          </div>

          <div th:if="${error}" class="alert alert-danger">
            <i class="fas fa-exclamation-circle me-2"></i>
            <span th:text="${error}"></span>
          </div>

          <button type="submit" class="btn btn-submit" onclick="showLoading(this)">
            <span class="btn-text">Đặt lại mật khẩu</span>
          </button>
        </form>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function togglePassword() {
      const passwordInput = document.getElementById('newPassword');
      const toggleIcon = document.getElementById('toggleIcon');

      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.classList.remove('fa-eye');
        toggleIcon.classList.add('fa-eye-slash');
      } else {
        passwordInput.type = 'password';
        toggleIcon.classList.remove('fa-eye-slash');
        toggleIcon.classList.add('fa-eye');
      }
    }

    function showLoading(button) {
      button.classList.add('btn-loading');
      button.innerHTML = '<span class="spinner"></span>Đang đặt lại...';
    }

    (function () {
      'use strict';
      window.addEventListener('load', function () {
        var forms = document.getElementsByClassName('needs-validation');
        var validation = Array.prototype.filter.call(forms, function (form) {
          form.addEventListener('submit', function (event) {
            if (form.checkValidity() === false) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        });
      }, false);
    })();

    document.addEventListener('DOMContentLoaded', function () {
      const alerts = document.querySelectorAll('.alert');
      alerts.forEach(function (alert) {
        setTimeout(function () {
          alert.style.opacity = '0';
          alert.style.transform = 'translateY(-20px)';
          setTimeout(function () {
            alert.style.display = 'none';
          }, 300);
        }, 5000);
      });

      document.querySelectorAll('.form-control').forEach(function (input) {
        input.addEventListener('focus', function () {
          this.parentElement.classList.add('focused');
        });

        input.addEventListener('blur', function () {
          if (this.value === '') {
            this.parentElement.classList.remove('focused');
          }
        });
      });
    });
  </script>
</body>

</html>